function showAndHideCustomPageDiv(){"2"==jQuery("input[name=lr_ciam_userlogin_redirect]:checked").val()?jQuery(".form-item-lr-ciam-custom-redirection").show():jQuery(".form-item-lr-ciam-custom-redirection").hide()}function showAndHideinstantPhoneOptions(){"true"==jQuery("input[name=lr_ciam_instant_otp_login]:checked").val()?jQuery(".form-item-lr-ciam-sms-template-one-time-passcode").show():jQuery(".form-item-lr-ciam-sms-template-one-time-passcode").hide()}function showAndHideinstantemailOptions(){"true"==jQuery("input[name=lr_ciam_instant_link_login]:checked").val()?jQuery(".form-item-lr-ciam-instant-link-login-email-template").show():jQuery(".form-item-lr-ciam-instant-link-login-email-template").hide()}if(jQuery(document).ready(function(){jQuery("#fade, #lr-loading").click(function(){jQuery("#fade, #lr-loading").hide()}),window.addEventListener("pageshow",function(e){(e.persisted||void 0!==window.performance&&2===window.performance.navigation.type)&&window.location.reload()}),dropemailvalue="",jQuery(".removeEmail").each(function(){jQuery(this).click(function(){jQuery('form[name="loginradius-removeemail"]').remove();var e=jQuery(this).parents("tr");dropemailvalue=jQuery(this).parents("tr").find(".form-text").val(),showRemoveEmailPopup(e)})}),showAndHideinstantPhoneOptions(),showAndHideinstantemailOptions(),showAndHideCustomPageDiv()}),"undefined"==typeof LoginRadiusV2){var e=document.createElement("script");e.src="https://auth.lrcontent2.com/v2/js/LoginRadiusV2.js",e.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(e)}var lrloadInterval=setInterval(function(){"undefined"!=typeof LoginRadiusV2&&(clearInterval(lrloadInterval),LRObject=new LoginRadiusV2(commonOptions))},1);function showRemoveEmailPopup(e){jQuery("#removeemail-form").show(),initializeRemoveEmailCiamForms(e)}function showAddEmailPopup(){jQuery("#addemail-form").show(),initializeAddEmailCiamForms()}function lrCloseRemovePopup(){jQuery('form[name="loginradius-removeemail"]').remove(),jQuery("#removeemail-form").hide()}function lrCloseAddEmailPopup(){jQuery("#addemail-form").hide()}function getBackupCodes(){var e=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(e),LRObject.api.getBackupCode(accessToken,function(e){jQuery("#backupcode-table-body").empty();for(var o=0;o<e.BackUpCodes.length;o++){var n="";jQuery("#resettable").hide(),jQuery("#lr_ciam_reset_table").show(),n+='<div class="form-item code-list" id="backup-codes-'+o+'-field">',n+='<span class="backupCode">'+e.BackUpCodes[o]+"</span>",n+="</div>",jQuery("#backupcode-table-body").append(n)}jQuery(".mybackupcopy").click(function(){setClipboard()})},function(e){jQuery("#resettable").show()}))},1)}function resetBackupCodes(){var e=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(e),LRObject.api.resetBackupCode(accessToken,function(e){jQuery("#backupcode-table-body").empty();for(var o=0;o<e.BackUpCodes.length;o++){var n="";jQuery("#resettable").hide(),jQuery("#lr_ciam_reset_table").show(),n+='<div class="form-item code-list" id="backup-codes-'+o+'-field">',n+='<span class="backupCode">'+e.BackUpCodes[o]+"</span>",n+="</div>",jQuery("#backupcode-table-body").append(n)}jQuery(".mybackupcopy").click(function(){setClipboard()})},function(e){handleResponse(!1,e[0].Description,"","error")}))},1)}function setClipboard(){var e="";jQuery(".code-list").find("span").each(function(){e+=jQuery(this).html()+"\n"});var o=document.createElement("textarea");o.style="position: absolute; left: -1000px; top: -1000px",o.value=e,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),jQuery(".copyMessage").show(),setTimeout(removeCodeCss,5e3)}function removeCodeCss(){jQuery(".code-list").find("span").removeAttr("style"),jQuery(".copyMessage").hide()}function changeIconColor(){jQuery(".code-list").find("span").css({"background-color":"#29d",color:"#fff"})}function lrCheckValidJson(e){jQuery("#"+e).change(function(){var o=jQuery("#"+e).val(),n="";try{if(1!=(n=jQuery.parseJSON(o))&&0!=n){var i=JSON.stringify(n,null,"\t").replace(/</g,"&lt;");"null"!=i?(jQuery("#"+e).val(i),jQuery("#"+e).css("border","1px solid green")):jQuery("#"+e).css("border","1px solid red")}else jQuery("#"+e).css("border","1px solid green")}catch(o){jQuery("#"+e).css("border","1px solid red")}})}function show_birthdate_date_block(){var e=(new Date).getFullYear(),o=e-100;jQuery("body").on?jQuery("body").on("focus",".loginradius-birthdate",function(){jQuery(".loginradius-birthdate").datepicker({dateFormat:"mm-dd-yy",maxDate:new Date,minDate:"-100y",changeMonth:!0,changeYear:!0,yearRange:o+":"+e})}):jQuery(".loginradius-birthdate").live("focus",function(){jQuery(".loginradius-birthdate").datepicker({dateFormat:"mm-dd-yy",maxDate:new Date,minDate:"-100y",changeMonth:!0,changeYear:!0,yearRange:o+":"+e})})}function handleResponse(e,o,n,i){i=i||"status",void 0===n||n||jQuery("#fade").show(),e&&jQuery("form").each(function(){this.reset()}),null!=o&&""!=o?(jQuery("#lr-loading").hide(),jQuery(".messageinfo").text(o),jQuery(".messages").show(),jQuery(".messageinfo").show(),jQuery(".messages").removeClass("error status"),jQuery(".messages").addClass(i),""!=autoHideTime&&"0"!=autoHideTime&&setTimeout(fade_out,1e3*autoHideTime)):(jQuery(".messages").hide(),jQuery(".messageinfo").hide(),jQuery(".messageinfo").text(""))}function fade_out(){jQuery(".messages").hide()}var setButtonInterval=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(setButtonInterval),LRObject.$hooks.call("setButtonsName",{removeemail:"Remove"}),LRObject.$hooks.register("startProcess",function(){jQuery("#lr-loading").show(),commonOptions.phoneLogin&&jQuery("#lr-loading").hide()}),LRObject.$hooks.register("endProcess",function(e){!0!==LRObject.options.twoFactorAuthentication&&!0!==LRObject.options.optionalTwoFactorAuthentication||jQuery("#authentication-container").show(),!0===LRObject.options.phoneLogin&&(jQuery("#updatephone-container").show(),jQuery("#lr_phoneid").show()),"resendOTP"===e&&jQuery("#login-container").length>0&&handleResponse(!0,commonOptions.FORGOT_PASSWORD_PHONE_MSG),jQuery("#lr-loading").hide()}),LRObject.$hooks.register("afterFormRender",function(e){"socialRegistration"==e&&jQuery("#login-container").find("form[name=loginradius-socialRegistration]").parent().addClass("socialRegistration"),"otp"==e&&handleResponse(!0,commonOptions.TWO_FA_MSG),"twofaotp"==e&&handleResponse(!0,commonOptions.TWO_FA_MSG),"removeemail"==e&&jQuery("#loginradius-removeemail-emailid").val(dropemailvalue)}),LRObject.$hooks.register("socialLoginFormRender",function(){jQuery("#lr-loading").hide(),jQuery("#social-registration-form").show(),show_birthdate_date_block()}))},1);function callSocialInterface(){var e={templateName:"loginradiuscustom_tmpl"},o=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(o),LRObject.customInterface(".interfacecontainerdiv",e))},1);jQuery("#lr-loading").hide()}function initializeLoginCiamForm(){var e={onSuccess:function(e){1==e.IsPosted&&void 0!==e.access_token?0!==jQuery("#loginradius-login-username").length?handleResponse(!0,commonOptions.LOGIN_BY_EMAIL_MSG):0!==jQuery("#loginradius-login-emailid").length&&handleResponse(!0,commonOptions.LOGIN_BY_EMAIL_MSG):void 0!==e.Data&&void 0!==e.Data.Sid?handleResponse(!0,commonOptions.LOGIN_BY_PHONE_MSG):void 0!==e.Data&&void 0===e.access_token?handleResponse(!0,commonOptions.EMAIL_VERIFICATION_SUCCESS_MSG):1==e.IsPosted?handleResponse(!0,commonOptions.LOGIN_BY_EMAIL_MSG):e.access_token&&(handleResponse(!0),ciamRedirect(e.access_token))},onError:function(e){handleResponse(!1,e[0].Description,"","error")},container:"login-container"},o=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(o),LRObject.init("login",e))},1);jQuery("#lr-loading").hide()}function initializeRegisterCiamForm(){var e={onSuccess:function(e){var o="",n="";void 0!==LRObject.options.optionalEmailVerification&&(o=LRObject.options.optionalEmailVerification),void 0!==LRObject.options.disabledEmailVerification&&(n=LRObject.options.disabledEmailVerification),e.IsPosted&&null==e.Data?void 0!==o&&!0===o||void 0!==n&&!0===n||(handleResponse(!0,commonOptions.REGISTRATION_SUCCESS_MSG),jQuery("html, body").animate({scrollTop:0},1e3)):null!=e.access_token&&""!=e.access_token?(handleResponse(!0,""),ciamRedirect(e.access_token)):e.IsPosted&&void 0!==e.Data&&null!==e.Data&&void 0!==e.Data.Sid?handleResponse(!0,commonOptions.REGISTRATION_OTP_MSG):1==LRObject.options.otpEmailVerification&&null==e.Data?handleResponse(!0,commonOptions.REGISTRATION_OTP_VERIFICATION_MSG):handleResponse(!0,commonOptions.REGISTRATION_SUCCESS_MSG)},onError:function(e){null!=e[0].Description&&handleResponse(!1,e[0].Description,"","error")},container:"registration-container"},o=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(o),"undefined"!=typeof registrationFormSchema&&""!=registrationFormSchema&&(LRObject.registrationFormSchema=registrationFormSchema),LRObject.init("registration",e))},1);jQuery("#lr-loading").hide()}function initializeSocialRegisterCiamForm(){var e={onSuccess:function(e){e.IsPosted&&void 0!==e.Data.AccountSid?handleResponse(!0,"An OTP has been sent."):1==e.IsPosted&&void 0===e.Data.AccountSid?(handleResponse(!0,commonOptions.SOCIAL_LOGIN_MSG),jQuery("#social-registration-form").hide(),jQuery("#lr-loading").hide()):e.access_token&&(handleResponse(!0,"",!0),ciamRedirect(e.access_token),jQuery("#lr-loading").hide())},onError:function(e){null!=e[0].Description&&(handleResponse(!1,e[0].Description,"","error"),jQuery("#social-registration-form").hide(),jQuery("#lr-loading").hide())},container:"social-registration-container"},o=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(o),LRObject.init("socialLogin",e))},1);jQuery("#lr-loading").hide()}function initializeForgotPasswordCiamForms(){var e={container:"forgotpassword-container",onSuccess:function(e){1==e.IsPosted&&void 0!==e.Data&&null!==e.Data?handleResponse(!0,commonOptions.FORGOT_PASSWORD_PHONE_MSG):1==LRObject.options.otpEmailVerification&&void 0===e.Data?handleResponse(!0,commonOptions.FORGOT_PHONE_OTP_VERIFICATION_MSG):1==e.IsPosted&&"object"==typeof e.Data?jQuery('form[name="loginradius-resetpassword"]').length>0&&handleResponse(!0,commonOptions.FORGOT_PASSWORD_SUCCESS_MSG):1==e.IsPosted&&void 0===e.Data&&(jQuery('form[name="loginradius-resetpassword"]').length>0?handleResponse(!0,commonOptions.FORGOT_PASSWORD_SUCCESS_MSG):handleResponse(!0,commonOptions.FORGOT_PASSWORD_MSG)),jQuery('input[type="text"]').val(""),jQuery('input[type="password"]').val("")},onError:function(e){null!=e[0].Description&&handleResponse(!1,e[0].Description,"","error")}},o=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(o),LRObject.$hooks.register("startProcess",function(e){"resetPassword"==e&&e,jQuery("#lr-loading").show()}),LRObject.init("forgotPassword",e))},1);jQuery("#lr-loading").hide()}function initializeResetPasswordCiamForm(e){var o=setInterval(function(){if("undefined"!=typeof LRObject){clearInterval(o);var n=LRObject.util.getQueryParameterByName("vtype");if(null!=n&&""!=n)if("reset"==n){var i={container:"resetpassword-container"};jQuery("#login-container").hide(),jQuery(".interfacecontainerdiv").hide(),i.onSuccess=function(o){handleResponse(!0,e.FORGOT_PASSWORD_SUCCESS_MSG),window.setTimeout(function(){window.location.replace(e.verificationUrl)},5e3)},i.onError=function(e){handleResponse(!1,e[0].Description,"","error")},LRObject.init("resetPassword",i)}else if("emailverification"==n){var t={onSuccess:function(o){void 0!==o&&(loggedIn||void 0===o.access_token||null==o.access_token||""==o.access_token?loggedIn||null==o.Data||null==o.Data.access_token||""==o.Data.access_token?(handleResponse(!0,e.EMAIL_VERIFICATION_SUCCESS_MSG),window.setTimeout(function(){window.location.replace(e.verificationUrl)},3e3)):ciamRedirect(o.Data.access_token):ciamRedirect(o.access_token))},onError:function(e){handleResponse(!1,e[0].Description,"","error")}};LRObject.init("verifyEmail",t)}else if("oneclicksignin"==n){var r={onSuccess:function(e){ciamRedirect(e.access_token)},onError:function(e){loggedIn||handleResponse(!1,e[0].Description,"","error")}};LRObject.init("instantLinkLogin",r)}}},1)}function initializeTwoFactorAuthenticator(){var e={container:"authentication-container",onSuccess:function(e){e.Sid&&handleResponse(!0,commonOptions.TWO_FA_MSG),e.IsDeleted?(handleResponse(!0,commonOptions.TWO_FA_DISABLED_MSG),window.setTimeout(function(){window.location.reload()},3e3)):void 0!==e.Uid&&(handleResponse(!0,commonOptions.TWO_FA_ENABLED_MSG),window.setTimeout(function(){window.location.reload()},3e3))},onError:function(e){null!=e[0].Description&&(handleResponse(!1,e[0].Description,"","error"),window.setTimeout(function(){window.location.reload()},1e3))}},o=setInterval(function(){void 0!==LRObject.options&&""!=LRObject.options&&(clearInterval(o),LRObject.init("createTwoFactorAuthentication",e))},1)}function initializeProfileUpdate(){var e={container:"profileeditor-container",onSuccess:function(e){handleResponse(!0,commonOptions.UPDATE_USER_PROFILE,"showmsg"),lrSetCookie("lr_profile_update","true"),window.location.href=window.location.href},onError:function(e){null!=e[0].Description&&handleResponse(!1,e[0].Description,"","error")}},o=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(o),LRObject.init("profileEditor",e))},1)}function initializePhoneUpdate(e){var o={container:"updatephone-container",onSuccess:function(e){void 0!==e.Data?handleResponse(!0,commonOptions.UPDATE_PHONE_MSG,"showmsg"):1==e.IsPosted&&(handleResponse(!0,commonOptions.UPDATE_PHONE_SUCCESS_MSG,"showmsg"),window.setTimeout(function(){window.location.reload()},1e3))},onError:function(e){null!=e[0].Description&&handleResponse(!1,e[0].Description,"","error")}},n=setInterval(function(){void 0!==LRObject.options&&""!=LRObject.options&&(clearInterval(n),LRObject.init("updatePhone",o),"--"==e&&jQuery("#updatephone-container #loginradius-submit-update").val("Add"))},1)}function initializeAccountLinkingCiamForms(){var e={container:"interfacecontainerdiv",templateName:"loginradiuscustom_tmpl_link",onSuccess:function(e){1!=e.IsPosted?(handleResponse(!0),ciamRedirect(e)):(lrSetCookie("lr_message",commonOptions.ACCOUNT_LINKING_MSG),window.location.href=window.location.href.split("?")[0]+"?lrresponse=true")},onError:function(e){"1028"!=e[0].ErrorCode&&null!=e[0].Description&&(lrSetCookie("lr_message",e[0].Description),window.location.href=window.location.href.split("?")[0]+"?lrresponse=false")}},o={onSuccess:function(e){1==e.IsDeleted&&(lrSetCookie("lr_message",commonOptions.ACCOUNT_UNLINKING_MSG),window.location.href=window.location.href.split("?")[0]+"?lrresponse=true")},onError:function(e){null!=e[0].Description&&(lrSetCookie("lr_message",e[0].Description),window.location.href=window.location.href.split("?")[0]+"?lrresponse=false")}},n=setInterval(function(){void 0!==LRObject.options&&""!=LRObject.options&&(clearInterval(n),!0!==LRObject.options.phoneLogin&&!0===LRObject.options.disabledEmailVerification||(LRObject.init("linkAccount",e),LRObject.init("unLinkAccount",o)))},1);jQuery("#lr-loading").hide()}function initializeAddEmailCiamForms(){var e={container:"addemail-container",onSuccess:function(e){jQuery("#addemail-form").hide(),handleResponse(!0,commonOptions.ADD_EMAIL_MSG)},onError:function(e){jQuery("#addemail-form").hide(),handleResponse(!1,e[0].Description,"","error")}},o=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(o),LRObject.init("addEmail",e))},1);jQuery("#lr-loading").hide()}function initializeRemoveEmailCiamForms(e){var o={container:"removeemail-container",onSuccess:function(o){jQuery("#removeemail-form").hide(),handleResponse(!0,commonOptions.REMOVE_EMAIL_MSG),e.remove(),window.setTimeout(function(){window.location.reload()},1e3)},onError:function(e){jQuery("#removeemail-form").hide(),handleResponse(!1,e[0].Description,"","error")}},n=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(n),LRObject.init("removeEmail",o))},1);jQuery("#lr-loading").hide()}function initializeChangePasswordCiamForms(){var e={container:"changepassword-container",onSuccess:function(e){handleResponse(!0,commonOptions.CHANGE_PASSWORD_SUCCESS_MSG)},onError:function(e){handleResponse(!1,e[0].Description,"","error")}},o=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(o),LRObject.init("changePassword",e))},1);jQuery("#lr-loading").hide()}function ciamRedirect(e,o){if(window.redirect)redirect(e,o);else{var n=o||"token",i=("undefined"!=typeof lr_source&&lr_source&&lr_source,document.createElement("form"));i.action=LocalDomain,i.method="POST";var t=document.createElement("input");t.type="hidden",t.value=e,t.name=n,i.appendChild(t),document.body.appendChild(i),i.submit()}}function lrSetCookie(e,o,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var t="expires="+i.toUTCString();document.cookie=e+"="+o+";"+t+";path=/"}