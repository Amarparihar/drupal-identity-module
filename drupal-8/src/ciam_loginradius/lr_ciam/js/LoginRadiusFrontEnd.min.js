function showRemoveEmailPopup(e){jQuery("#removeemail-form").show(),initializeRemoveEmailCiamForms(e)}function showAddEmailPopup(){jQuery("#addemail-form").show(),initializeAddEmailCiamForms()}function lrCloseRemovePopup(){jQuery('form[name="loginradius-removeemail"]').remove(),jQuery("#removeemail-form").hide()}function lrCloseAddEmailPopup(){jQuery("#addemail-form").hide()}function showAndHideUI(){var e=jQuery("input[name=ciam_email_verification_condition]:checked").val(),i=jQuery("fieldset[data-drupal-selector=edit-ciam-enable-login-on-email-verification]"),o=jQuery("fieldset[data-drupal-selector=edit-ciam-enable-user-name]"),n=jQuery("fieldset[data-drupal-selector=edit-ciam-ask-email-always-for-unverified]"),r=jQuery("fieldset[data-drupal-selector=prompt-password]");2==e?(i.hide(),r.hide(),o.hide(),n.hide()):1==e?(i.show(),r.hide(),o.hide(),n.show()):(i.show(),r.show(),n.show(),o.show())}function lrCheckValidJson(){jQuery("#add_custom_options").change(function(){var e=jQuery("#add_custom_options").val(),i="";try{if(i=jQuery.parseJSON(e),1!=i&&0!=i){var o=JSON.stringify(i,null,"	").replace(/</g,"&lt;");"null"!=o?(jQuery("#add_custom_options").val(o),jQuery("#add_custom_options").css("border","1px solid green")):jQuery("#add_custom_options").css("border","1px solid red")}else jQuery("#add_custom_options").css("border","1px solid green")}catch(n){jQuery("#add_custom_options").css("border","1px solid green")}})}function show_birthdate_date_block(){var e=(new Date).getFullYear(),i=e-100;jQuery("body").on?jQuery("body").on("focus",".loginradius-birthdate",function(){jQuery(".loginradius-birthdate").datepicker({dateFormat:"mm-dd-yy",maxDate:new Date,minDate:"-100y",changeMonth:!0,changeYear:!0,yearRange:i+":"+e})}):jQuery(".loginradius-birthdate").live("focus",function(){jQuery(".loginradius-birthdate").datepicker({dateFormat:"mm-dd-yy",maxDate:new Date,minDate:"-100y",changeMonth:!0,changeYear:!0,yearRange:i+":"+e})})}function handleResponse(e,i,o,n){n=n?"messages--"+n:"messages--status",e&&jQuery("form").each(function(){this.reset()}),null!=i&&""!=i?(jQuery("#lr-loading").hide(),jQuery(".messages").text(i),jQuery(".messages__wrapper").show(),jQuery(".messages").show(),jQuery(".messages").removeClass("messages--error messages--status"),jQuery(".messages").addClass(n)):(jQuery(".messages__wrapper").hide(),jQuery(".messages").hide(),jQuery(".messages").text(""))}function callSocialInterface(){var e={};e.templateName="loginradiuscustom_tmpl",LRObject.util.ready(function(){LRObject.customInterface(".interfacecontainerdiv",e)}),jQuery("#lr-loading").hide()}function initializeLoginCiamForm(){var e={};e.onSuccess=function(e){handleResponse(!0,""),ciamRedirect(e.access_token)},e.onError=function(e){handleResponse(!1,e[0].Description,"","error")},e.container="login-container",LRObject.util.ready(function(){LRObject.init("login",e)}),jQuery("#lr-loading").hide()}function initializeRegisterCiamForm(){var e={};e.onSuccess=function(e){null!=e.access_token&&""!=e.access_token?(handleResponse(!0,""),ciamRedirect(e.access_token)):(handleResponse(!0,"An email has been sent to "+jQuery("#loginradius-registration-emailid").val()+".Please verify your email address"),window.setTimeout(function(){window.location.replace(homeDomain)},7e3))},e.onError=function(e){null!=e[0].Description&&handleResponse(!1,e[0].Description,"","error")},e.container="registration-container",LRObject.util.ready(function(){LRObject.init("registration",e)}),jQuery("#lr-loading").hide()}function initializeResetPasswordCiamForm(e){var i=LRObject.util.getQueryParameterByName("vtype");if(null!=i&&""!=i)if("reset"==i){var o={};o.container="resetpassword-container",jQuery("#login-container").hide(),jQuery(".interfacecontainerdiv").hide(),jQuery("#interfaceLabel").hide(),o.onSuccess=function(i){handleResponse(!0,"Password reset successfully"),window.setTimeout(function(){window.location.replace(e.verificationUrl)},5e3)},o.onError=function(e){handleResponse(!1,e[0].Description,"","error")},LRObject.util.ready(function(){LRObject.init("resetPassword",o)})}else if("emailverification"==i){var n={};n.onSuccess=function(i){void 0!=i&&("undefined"!=typeof i.access_token&&null!=i.access_token&&""!=i.access_token?e.loginOnEmailVerification?ciamRedirect(i.access_token):jQuery(".region.region-highlighted").html(getMessage("status","Your email has been verified successfully")):null!=i.Data&&null!=i.Data.access_token&&""!=i.Data.access_token&&e.loginOnEmailVerification?ciamRedirect(i.Data.access_token):jQuery(".region.region-highlighted").html(getMessage("status","Your email has been verified successfully")))},n.onError=function(e){jQuery(".region.region-highlighted").html(getMessage("error",e[0].Description))},LRObject.util.ready(function(){LRObject.init("verifyEmail",n)})}jQuery("#lr-loading").hide()}function initializeSocialRegisterCiamForm(){var e={};e.onSuccess=function(e){null!=e.access_token&&""!=e.access_token?(handleResponse(!0,""),ciamRedirect(e.access_token),jQuery("#lr-loading").hide()):e.IsPosted&&(handleResponse(!0,"An email has been sent to "+jQuery("#loginradius-socialRegistration-emailid").val()+".Please verify your email address."),jQuery("#social-registration-form").hide(),jQuery("#lr-loading").hide())},e.onError=function(e){null!=e[0].Description&&(handleResponse(!1,e[0].Description,"","error"),jQuery("#social-registration-form").hide(),jQuery("#lr-loading").hide())},e.container="social-registration-container",LRObject.util.ready(function(){LRObject.init("socialLogin",e),jQuery("#lr-loading").show()}),jQuery("#lr-loading").hide()}function initializeForgotPasswordCiamForms(){var e={};e.container="forgotpassword-container",e.onSuccess=function(e){handleResponse(!0,"An email has been sent to "+jQuery("#loginradius-forgotpassword-emailid").val()+" with reset Password link"),window.setTimeout(function(){window.location.replace(homeDomain)},7e3)},e.onError=function(e){null!=e[0].Description&&handleResponse(!1,e[0].Description,"","error")},LRObject.util.ready(function(){LRObject.init("forgotPassword",e)}),jQuery("#lr-loading").hide()}function initializeAccountLinkingCiamForms(){var e={};e.container="interfacecontainerdiv",e.templateName="loginradiuscustom_tmpl_link",e.onSuccess=function(e){1!=e.IsPosted?(handleResponse(!0,""),ciamRedirect(e)):(jQuery(".region.region-highlighted").html(getMessage("status","Account linked successfully")),window.setTimeout(function(){window.location.reload()},3e3))},e.onError=function(e){null!=e[0].Description&&jQuery(".region.region-highlighted").html(getMessage("error",e[0].Description))};var i={};i.onSuccess=function(e){1==e.IsDeleted&&(jQuery(".region.region-highlighted").html(getMessage("status","Account unlinked successfully")),window.setTimeout(function(){window.location.reload()},3e3))},i.onError=function(e){null!=e[0].Description&&jQuery(".region.region-highlighted").html(getMessage("error",e[0].Description))},LRObject.util.ready(function(){LRObject.init("linkAccount",e),LRObject.init("unLinkAccount",i)}),jQuery("#lr-loading").hide()}function getMessage(e,i){return'<div class="messages__wrapper layout-container"><div role="contentinfo" aria-label="Status message" class="messages messages--'+e+'"><h2 class="visually-hidden">Status message</h2>'+i+"</div></div>"}function initializeAddEmailCiamForms(){var e={};e.container="addemail-container",e.onSuccess=function(e){jQuery("#addemail-form").hide(),jQuery(".region.region-highlighted").html(getMessage("status","Email added successfully, Please verify your email address."))},e.onError=function(e){jQuery("#addemail-form").hide(),jQuery(".region.region-highlighted").html(getMessage("error",e[0].Description))},LRObject.util.ready(function(){LRObject.init("addEmail",e)}),jQuery("#lr-loading").hide()}function initializeRemoveEmailCiamForms(e){var i={};i.container="removeemail-container",i.onSuccess=function(i){jQuery("#removeemail-form").hide(),jQuery(".region.region-highlighted").html(getMessage("status","Email removed successfully")),e.remove()},i.onError=function(e){jQuery("#removeemail-form").hide(),jQuery(".region.region-highlighted").html(getMessage("error",e[0].Description))},LRObject.util.ready(function(){LRObject.init("removeEmail",i)}),jQuery("#lr-loading").hide()}function initializeChangePasswordCiamForms(){var e={};e.container="changepassword-container",e.onSuccess=function(e){handleResponse(!0,"Password has been updated successfully")},e.onError=function(e){handleResponse(!1,e[0].Description,"","error")},LRObject.util.ready(function(){LRObject.init("changePassword",e)}),jQuery("#lr-loading").hide()}function ciamRedirect(e,i){var o=LRObject.util.getQueryParameterByName("vtype");if(null!=o&&""!=o&&loggedIn&&"emailverification"==o&&(jQuery(".region.region-highlighted").html(getMessage("status","Your email has been verified successfully")),LocalDomain=homeDomain+"user/ciamlogin?destination="+domainName+"user"),setTimeout(function(){jQuery("#lr-loading").show()},700),window.redirect)redirect(e,i);else{var n=i?i:"token",r=("undefined"!=typeof lr_source&&lr_source?lr_source:"",document.createElement("form"));r.action=LocalDomain,r.method="POST";var a=document.createElement("input");a.type="hidden",a.value=e,a.name=n,r.appendChild(a),document.body.appendChild(r),r.submit()}}jQuery(document).ready(function(){jQuery("#lr-loading").click(function(){jQuery("#lr-loading").hide()});var e=domainName+"admin/people/create";jQuery("a[href= '"+e+"']").attr("href","https://secure.loginradius.com/user-management/manage-users"),jQuery(".action-links a").attr("target","_blank"),window.location.href==window.location.origin+domainName+"admin/people"&&jQuery(".dropbutton a").attr("href","https://secure.loginradius.com/user-management/manage-users"),dropemailvalue="",jQuery(".removeEmail").each(function(){jQuery(this).click(function(){jQuery('form[name="loginradius-removeemail"]').remove();var e=jQuery(this).parents("tr");dropemailvalue=jQuery(this).parents("tr").find(".form-email").val(),showRemoveEmailPopup(e)})}),jQuery("#addEmail").attr("onClick","showAddEmailPopup()"),showAndHideUI()});var LRObject=new LoginRadiusV2(ciamoption);LRObject.$hooks.register("startProcess",function(){jQuery("#lr-loading").show()}),LRObject.$hooks.register("endProcess",function(){ciamoption.formRenderDelay&&setTimeout(function(){jQuery("#lr-loading").hide()},ciamoption.formRenderDelay-1),jQuery("#lr-loading").hide()}),LRObject.$hooks.register("socialLoginFormRender",function(){jQuery("#lr-loading").hide(),jQuery("#social-registration-form").show(),show_birthdate_date_block()}),LRObject.$hooks.call("passwordMeterConfiguration",[{"case":"worst",message:"6 length is required",color:"Red"},{"case":"bad",message:"Bad",color:"Red"},{"case":"weak",message:"weak",color:"yellow"},{"case":"good",message:"Good",color:"Green"},{"case":"strong",message:"Strong",color:"Green"},{"case":"secure",message:"Secure",color:"Blue"}]),LRObject.$hooks.register("afterFormRender",function(e){"socialRegistration"==e&&jQuery("#login-container").find("form[name=loginradius-socialRegistration]").parent().addClass("socialRegistration"),"removeemail"==e&&jQuery("#loginradius-removeemail-emailid").val(dropemailvalue)});