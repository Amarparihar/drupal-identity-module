function showRemoveEmailPopup(e){jQuery("#removeemail-form").show(),initializeRemoveEmailCiamForms(e)}function showAddEmailPopup(){jQuery("#addemail-form").show(),initializeAddEmailCiamForms()}function lrCloseRemovePopup(){jQuery('form[name="loginradius-removeemail"]').remove(),jQuery("#removeemail-form").hide()}function lrCloseAddEmailPopup(){jQuery("#addemail-form").hide()}function showLoginTypeOptions(){var e=jQuery("input[name=ciam_login_type]:checked").val();if("email"==e){jQuery("#edit-lr-phone-settings").hide();var i=jQuery("input[name=ciam_email_verification_condition]:checked").val();2==i?(jQuery("fieldset[data-drupal-selector=email-verification-options],fieldset[data-drupal-selector=edit-ciam-instant-link-login],.form-item-ciam-instant-link-login-button-label,.form-item-ciam-instant-link-login-email-template").show(),jQuery("fieldset[data-drupal-selector=edit-ciam-enable-login-on-email-verification],fieldset[data-drupal-selector=prompt-password],fieldset[data-drupal-selector=edit-ciam-enable-user-name],fieldset[data-drupal-selector=edit-ciam-ask-email-always-for-unverified]").hide()):1==i?(jQuery("fieldset[data-drupal-selector=email-verification-options],fieldset[data-drupal-selector=edit-ciam-enable-login-on-email-verification],fieldset[data-drupal-selector=edit-ciam-ask-email-always-for-unverified],fieldset[data-drupal-selector=edit-ciam-instant-link-login],.form-item-ciam-instant-link-login-button-label,.form-item-ciam-instant-link-login-email-template").show(),jQuery("fieldset[data-drupal-selector=prompt-password],fieldset[data-drupal-selector=edit-ciam-enable-user-name]").hide()):jQuery("fieldset[data-drupal-selector=email-verification-options],fieldset[data-drupal-selector=edit-ciam-enable-login-on-email-verification],fieldset[data-drupal-selector=prompt-password],fieldset[data-drupal-selector=edit-ciam-enable-user-name],fieldset[data-drupal-selector=edit-ciam-ask-email-always-for-unverified],fieldset[data-drupal-selector=edit-ciam-instant-link-login],.form-item-ciam-instant-link-login-button-label,.form-item-ciam-instant-link-login-email-template").show()}else if("phone"==e){jQuery("fieldset[data-drupal-selector=email-verification-options],fieldset[data-drupal-selector=edit-ciam-enable-login-on-email-verification],fieldset[data-drupal-selector=prompt-password],fieldset[data-drupal-selector=edit-ciam-enable-user-name],fieldset[data-drupal-selector=edit-ciam-ask-email-always-for-unverified],fieldset[data-drupal-selector=edit-ciam-instant-link-login],.form-item-ciam-instant-link-login-button-label,.form-item-ciam-instant-link-login-email-template").hide(),jQuery("#edit-lr-phone-settings").show();var o=jQuery("input[name=ciam_enable_phone_login]:checked").val();"true"==o?jQuery("fieldset[data-drupal-selector=edit-ciam-exist-phone-number],fieldset[data-drupal-selector=edit-ciam-instant-otp-login],.form-item-ciam-sms-template,.form-item-ciam-sms-template-phone-verification,.form-item-ciam-instant-otp-login-button-label,.form-item-ciam-sms-template-one-time-passcode").show():jQuery("fieldset[data-drupal-selector=edit-ciam-exist-phone-number],fieldset[data-drupal-selector=edit-ciam-instant-otp-login],.form-item-ciam-sms-template,.form-item-ciam-sms-template-phone-verification,.form-item-ciam-instant-otp-login-button-label,.form-item-ciam-sms-template-one-time-passcode").hide()}}function showAndHide2faOptions(){var e=jQuery("input[name=ciam_enable_2fa]:checked").val();"true"==e?jQuery(".form-item-ciam-2fa-flow,.form-item-ciam-sms-template-2fa,fieldset[data-drupal-selector=edit-ciam-google-authentication]").show():jQuery(".form-item-ciam-2fa-flow,.form-item-ciam-sms-template-2fa,fieldset[data-drupal-selector=edit-ciam-google-authentication]").hide()}function showAndHideRecaptchaOptions(){var e=jQuery("input[name=ciam_enable_recaptcha]:checked").val();"true"==e?jQuery(".form-item-ciam-v2-recaptcha-type,.form-item-ciam-v2-recaptcha-site-key").show():jQuery(".form-item-ciam-v2-recaptcha-type,.form-item-ciam-v2-recaptcha-site-key").hide()}function lrCheckValidJson(){jQuery("#add_custom_options").change(function(){var e=jQuery("#add_custom_options").val(),i="";try{if(i=jQuery.parseJSON(e),1!=i&&0!=i){var o=JSON.stringify(i,null,"	").replace(/</g,"&lt;");"null"!=o?(jQuery("#add_custom_options").val(o),jQuery("#add_custom_options").css("border","1px solid green")):jQuery("#add_custom_options").css("border","1px solid red")}else jQuery("#add_custom_options").css("border","1px solid green")}catch(a){jQuery("#add_custom_options").css("border","1px solid green")}})}function show_birthdate_date_block(){var e=(new Date).getFullYear(),i=e-100;jQuery("body").on?jQuery("body").on("focus",".loginradius-birthdate",function(){jQuery(".loginradius-birthdate").datepicker({dateFormat:"mm-dd-yy",maxDate:new Date,minDate:"-100y",changeMonth:!0,changeYear:!0,yearRange:i+":"+e})}):jQuery(".loginradius-birthdate").live("focus",function(){jQuery(".loginradius-birthdate").datepicker({dateFormat:"mm-dd-yy",maxDate:new Date,minDate:"-100y",changeMonth:!0,changeYear:!0,yearRange:i+":"+e})})}function handleResponse(e,i,o,a){a=a?"messages--"+a:"messages--status",e&&jQuery("form").each(function(){this.reset()}),null!=i&&""!=i?(jQuery("#lr-loading").hide(),jQuery(".messages").text(i),jQuery(".messages__wrapper").show(),jQuery(".messages").show(),jQuery(".messages").removeClass("messages--error messages--status"),jQuery(".messages").addClass(a),""!=autoHideTime&&"0"!=autoHideTime&&setTimeout(fade_out,1e3*autoHideTime)):(jQuery(".messages__wrapper").hide(),jQuery(".messages").hide(),jQuery(".messages").text(""))}function fade_out(){jQuery(".messages").hide()}function getBackupCodes(){LRObject.api.getBackupCode(accessToken,function(e){jQuery("#backupcode-table-body").empty();for(var i=0;i<e.BackUpCodes.length;i++){var o="";jQuery("#resettable").hide(),jQuery("#lr_ciam_reset_table").show(),o+='<div class="form-item code-list" id="backup-codes-'+i+'-field">',o+='<span class="backupCode">'+e.BackUpCodes[i]+"</span>",o+="</div>",jQuery("#backupcode-table-body").append(o)}jQuery(".mybackupcopy").click(function(){setClipboard(jQuery(this).parent(".form-item").find("span").text())})},function(e){jQuery("#resettable").show()})}function resetBackupCodes(){LRObject.api.resetBackupCode(accessToken,function(e){jQuery("#backupcode-table-body").empty();for(var i=0;i<e.BackUpCodes.length;i++){var o="";jQuery("#resettable").hide(),jQuery("#lr_ciam_reset_table").show(),o+='<div class="form-item code-list" id="backup-codes-'+i+'-field">',o+='<span class="backupCode">'+e.BackUpCodes[i]+"</span>",o+="</div>",jQuery("#backupcode-table-body").append(o)}jQuery(".mybackupcopy").click(function(){setClipboard(jQuery(this).parent(".form-item").find("span").text())})},function(e){})}function setClipboard(){var e="";jQuery(".code-list").find("span").each(function(){e+=jQuery(this).html()+"\n"});var i=document.createElement("textarea");i.style="position: absolute; left: -1000px; top: -1000px",i.value=e,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),jQuery(".copyMessage").show(),setTimeout(removeCodeCss,5e3)}function removeCodeCss(){jQuery(".code-list").find("span").removeAttr("style"),jQuery(".copyMessage").hide()}function changeIconColor(){jQuery(".code-list").find("span").css({"background-color":"#29d",color:"#fff"})}function callSocialInterface(){var e={};e.templateName="loginradiuscustom_tmpl",LRObject.customInterface(".interfacecontainerdiv",e),jQuery("#lr-loading").hide()}function initializeLoginCiamForm(){var e={};e.onSuccess=function(e){e.access_token?(handleResponse(!0),ciamRedirect(e.access_token)):0!==jQuery("#loginradius-login-username").length?handleResponse(!0,"An email has been sent to "+jQuery("#loginradius-login-username").val()+".Please verify your email address"):0!==jQuery("#loginradius-login-emailid").length&&handleResponse(!0,"An email has been sent to "+jQuery("#loginradius-login-emailid").val()+".Please verify your email address")},e.onError=function(e){handleResponse(!1,e[0].Description,"","error")},e.container="login-container",LRObject.init("login",e),jQuery("#lr-loading").hide()}function initializeRegisterCiamForm(){var e={};e.onSuccess=function(e){null!=e.access_token&&""!=e.access_token?(handleResponse(!0,""),ciamRedirect(e.access_token)):(handleResponse(!0,"An email has been sent to "+jQuery("#loginradius-registration-emailid").val()+".Please verify your email address"),jQuery("html, body").animate({scrollTop:0},1e3))},e.onError=function(e){null!=e[0].Description&&(handleResponse(!1,e[0].Description,"","error"),jQuery("html, body").animate({scrollTop:0},1e3))},e.container="registration-container",LRObject.init("registration",e),jQuery("#lr-loading").hide()}function initializeResetPasswordCiamForm(e){var i=LRObject.util.getQueryParameterByName("vtype");if(null!=i&&""!=i)if("reset"==i){var o={};o.container="resetpassword-container",jQuery("#login-container").hide(),jQuery(".interfacecontainerdiv").hide(),jQuery("#interfaceLabel").hide(),o.onSuccess=function(i){handleResponse(!0,"Password reset successfully, Now you can login with changed password."),window.setTimeout(function(){window.location.replace(e.verificationUrl)},3e3)},o.onError=function(e){handleResponse(!1,e[0].Description,"","error")},LRObject.init("resetPassword",o)}else if("emailverification"==i){var a={};a.onSuccess=function(i){"undefined"!=typeof i&&(!loggedIn&&e.loginOnEmailVerification&&"undefined"!=typeof i.access_token&&null!=i.access_token&&""!=i.access_token?ciamRedirect(i.access_token):!loggedIn&&e.loginOnEmailVerification&&null!=i.Data&&null!=i.Data.access_token&&""!=i.Data.access_token?ciamRedirect(i.Data.access_token):(lrSetCookie("lr_message","Your email has been verified successfully."),window.location.href=window.location.href.split("?")[0]+"?lrresponse=true"))},a.onError=function(e){lrSetCookie("lr_message",e[0].Description),window.location.href=window.location.href.split("?")[0]+"?lrresponse=false"},LRObject.init("verifyEmail",a)}else if("oneclicksignin"==i){var t={};t.onSuccess=function(e){ciamRedirect(e.access_token)},t.onError=function(e){handleResponse(!1,e[0].Description,"","error")},LRObject.init("instantLinkLogin",t)}jQuery("#lr-loading").hide()}function initializeSocialRegisterCiamForm(){var e={};e.onSuccess=function(e){null!=e.access_token&&""!=e.access_token?(handleResponse(!0,""),ciamRedirect(e.access_token),jQuery("#lr-loading").hide()):e.IsPosted&&(handleResponse(!0,"An email has been sent to "+jQuery("#loginradius-socialRegistration-emailid").val()+".Please verify your email address."),jQuery("#social-registration-form").hide(),jQuery("#lr-loading").hide())},e.onError=function(e){null!=e[0].Description&&(handleResponse(!1,e[0].Description,"","error"),jQuery("#social-registration-form").hide(),jQuery("#lr-loading").hide())},e.container="social-registration-container",LRObject.init("socialLogin",e),jQuery("#lr-loading").show(),jQuery("#lr-loading").hide()}function initializeForgotPasswordCiamForms(){var e={};e.container="forgotpassword-container",e.onSuccess=function(e){commonOptions.phoneLogin?handleResponse(!0,"Password reset successfully"):handleResponse(!0,"An email has been sent to "+jQuery("#loginradius-forgotpassword-emailid").val()+" with reset Password link")},e.onError=function(e){null!=e[0].Description&&handleResponse(!1,e[0].Description,"","error")},LRObject.init("forgotPassword",e),jQuery("#lr-loading").hide()}function initializeAccountLinkingCiamForms(){var e={};e.container="interfacecontainerdiv",e.templateName="loginradiuscustom_tmpl_link",e.onSuccess=function(e){1!=e.IsPosted?(handleResponse(!0,""),ciamRedirect(e)):(lrSetCookie("lr_message","Account linked successfully"),window.location.href=window.location.href.split("?")[0]+"?lrresponse=true",window.setTimeout(function(){window.location.reload()},3e3))},e.onError=function(e){null!=e[0].Description&&(lrSetCookie("lr_message",e[0].Description),window.location.href=window.location.href.split("?")[0]+"?lrresponse=false")};var i={};i.onSuccess=function(e){1==e.IsDeleted&&(lrSetCookie("lr_message","Account unlinked successfully"),window.location.href=window.location.href.split("?")[0]+"?lrresponse=true",window.setTimeout(function(){window.location.reload()},3e3))},i.onError=function(e){null!=e[0].Description&&(lrSetCookie("lr_message",e[0].Description),window.location.href=window.location.href.split("?")[0]+"?lrresponse=false")},LRObject.init("linkAccount",e),LRObject.init("unLinkAccount",i),jQuery("#lr-loading").hide()}function initializeTwoFactorAuthenticator(){var e={};e.container="authentication-container",e.onSuccess=function(e){e.IsDeleted?(lrSetCookie("lr_message","Disabled successfully."),window.location.href=window.location.href.split("?")[0]+"?lrresponse=true",jQuery("html, body").animate({scrollTop:0},1e3)):(lrSetCookie("lr_message","Verified successfully."),window.location.href=window.location.href.split("?")[0]+"?lrresponse=true",jQuery("html, body").animate({scrollTop:0},1e3))},e.onError=function(e){null!=e[0].Description&&(lrSetCookie("lr_message",e[0].Description),window.location.href=window.location.href.split("?")[0]+"?lrresponse=false")},LRObject.init("createTwoFactorAuthentication",e)}function initializePhoneUpdate(){var e={};e.container="updatephone-container",e.onSuccess=function(e){lrSetCookie("lr_message","Updated successfully."),window.location.href=window.location.href.split("?")[0]+"?lrresponse=true",jQuery("html, body").animate({scrollTop:0},1e3)},e.onError=function(e){null!=e[0].Description&&(lrSetCookie("lr_message",e[0].Description),window.location.href=window.location.href.split("?")[0]+"?lrresponse=false",jQuery("html, body").animate({scrollTop:0},1e3))},LRObject.init("updatePhone",e)}function initializeAddEmailCiamForms(){var e={};e.container="addemail-container",e.onSuccess=function(e){jQuery("#addemail-form").hide(),lrSetCookie("lr_message","Email added successfully, Please verify your email address."),window.location.href=window.location.href.split("?")[0]+"?lrresponse=true",jQuery("html, body").animate({scrollTop:0},1e3)},e.onError=function(e){jQuery("#addemail-form").hide(),lrSetCookie("lr_message",e[0].Description),window.location.href=window.location.href.split("?")[0]+"?lrresponse=false",jQuery("html, body").animate({scrollTop:0},1e3)},LRObject.init("addEmail",e),jQuery("#lr-loading").hide()}function initializeRemoveEmailCiamForms(e){var i={};i.container="removeemail-container",i.onSuccess=function(i){jQuery("#removeemail-form").hide(),lrSetCookie("lr_message","Email has been removed successfully."),window.location.href=window.location.href.split("?")[0]+"?lrresponse=true",e.remove(),jQuery("html, body").animate({scrollTop:0},1e3)},i.onError=function(e){jQuery("#removeemail-form").hide(),lrSetCookie("lr_message",e[0].Description),window.location.href=window.location.href.split("?")[0]+"?lrresponse=false",jQuery("html, body").animate({scrollTop:0},1e3)},LRObject.init("removeEmail",i),jQuery("#lr-loading").hide()}function initializeChangePasswordCiamForms(){var e={};e.container="changepassword-container",e.onSuccess=function(e){handleResponse(!0,"Password has been updated successfully.")},e.onError=function(e){handleResponse(!1,e[0].Description,"","error")},LRObject.init("changePassword",e),jQuery("#lr-loading").hide()}function ciamRedirect(e,i){if(window.redirect)redirect(e,i);else{var o=i?i:"token",a=("undefined"!=typeof lr_source&&lr_source?lr_source:"",document.createElement("form"));a.action=LocalDomain,a.method="POST";var t=document.createElement("input");t.type="hidden",t.value=e,t.name=o,a.appendChild(t),document.body.appendChild(a),a.submit()}}function lrSetCookie(e,i,o){var a=new Date;a.setTime(a.getTime()+24*o*60*60*1e3);var t="expires="+a.toUTCString();document.cookie=e+"="+i+";"+t+";path=/"}jQuery(document).ready(function(){jQuery("#lr-loading").click(function(){jQuery("#lr-loading").hide()}),window.location.href==window.location.origin+domainName+"admin/people/create"?(jQuery(".form-item-mail label").attr("class","js-form-required form-required"),jQuery("#edit-mail").attr("required","required")):(jQuery("#edit-mail").attr("disabled","disabled"),jQuery("#edit-mail").attr("style","background:#ededed")),dropemailvalue="",jQuery(".removeEmail").each(function(){jQuery(this).click(function(){jQuery('form[name="loginradius-removeemail"]').remove();var e=jQuery(this).parents("tr");dropemailvalue=jQuery(this).parents("tr").find(".form-email").val(),showRemoveEmailPopup(e)})}),jQuery("#addEmail").attr("onClick","showAddEmailPopup()"),showLoginTypeOptions(),showAndHideRecaptchaOptions(),showAndHide2faOptions()});var LRObject=new LoginRadiusV2(commonOptions);LRObject.$hooks.register("startProcess",function(){jQuery("#lr-loading").show()}),LRObject.$hooks.register("endProcess",function(){commonOptions.formRenderDelay&&setTimeout(function(){jQuery("#lr-loading").hide()},commonOptions.formRenderDelay-1),jQuery("#lr-loading").hide()}),LRObject.$hooks.call("setButtonsName",{removeemail:"Remove",instantLinkLoginButtonLabel:commonOptions.instantLinkLoginButtonLabel,instantOTPLoginButtonLabel:commonOptions.instantOTPLoginButtonLabel}),LRObject.$hooks.register("socialLoginFormRender",function(){jQuery("#lr-loading").hide(),jQuery("#social-registration-form").show(),show_birthdate_date_block()}),LRObject.$hooks.register("afterFormRender",function(e){"socialRegistration"==e&&jQuery("#login-container").find("form[name=loginradius-socialRegistration]").parent().addClass("socialRegistration"),"removeemail"==e&&jQuery("#loginradius-removeemail-emailid").val(dropemailvalue)});